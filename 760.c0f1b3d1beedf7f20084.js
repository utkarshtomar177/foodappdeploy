"use strict";(self.webpackChunk_dashboard=self.webpackChunk_dashboard||[]).push([[760],{5760:(ge,C,i)=>{i.r(C),i.d(C,{CanopiesModule:()=>pe});var Z=i(3423),y=i(1095),J=i(7539),m=i(8295),T=i(6627),b=i(9983),w=i(3935),x=i(9692),A=i(2178),L=i(2458),u=i(1494),F=i(7441),I=i(5396),S=i(1436),N=i(4466),c=i(3679),k=i(9765),R=i(6682),v=i(6782),q=i(4395),p=i(3190),g=i(8002),D=i(1452),e=i(7716),B=i(1400),_=i(6215),Y=i(205),M=i(5917),Q=i(3342),f=i(5257),O=i(5435),z=i(1841);let U=(()=>{class n{constructor(t){this._httpClient=t,this._canopies=new _.X(null),this._canopy=new _.X(null),this._pagination=new _.X(null)}get canopies$(){return this._canopies.asObservable()}get canopy$(){return this._canopy.asObservable()}get pagination$(){return this._pagination.asObservable()}getCanopies(t=0,o=10,a="name",r="asc",l=""){return this._httpClient.get("http://13.51.195.30:8080/admin/canopies",{params:{page:""+t,size:""+o,sort:a,order:r,search:l}}).pipe((0,Q.b)(h=>{this._pagination.next(h.pagination),this._canopies.next(h.canopies)}))}getCanopyById(t){return this._canopies.pipe((0,f.q)(1),(0,g.U)(o=>{const a=o.find(r=>r.id===t)||null;return this._canopy.next(a),a}),(0,p.w)(o=>o?(0,M.of)(o):(0,Y._)("Could not found product with id of "+t+"!")))}createCanopy(){return this.canopies$.pipe((0,f.q)(1),(0,p.w)(t=>this._httpClient.post("http://13.51.195.30:8080/admin/canopy",{name:"Please add a name",pincode:"000000",address:"Please add an address"}).pipe((0,g.U)(o=>(this._canopies.next([o,...t]),o)))))}updateCanopy(t,o){return this.canopies$.pipe((0,f.q)(1),(0,p.w)(a=>this._httpClient.patch("http://13.51.195.30:8080/admin/canopy/"+t,o).pipe((0,g.U)(r=>{const l=a.findIndex(h=>h.id===t);return a[l]=r,this._canopies.next(a),r}),(0,p.w)(r=>this.canopy$.pipe((0,f.q)(1),(0,O.h)(l=>l&&l.id===t),(0,Q.b)(()=>(this._canopy.next(r),r)))))))}deleteProduct(t,o){return o.active=!1,this.updateCanopy(t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=i(8583);function $(n,s){1&n&&(e.TgZ(0,"div",16),e._UZ(1,"mat-progress-bar",17),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function j(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",34),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function E(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",35),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function P(n,s){1&n&&e.GkF(0)}const G=function(n){return{$implicit:n}};function V(n,s){if(1&n&&(e.ynx(0),e.YNc(1,P,1,0,"ng-container",36),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const o=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,G,t))}}function H(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e._uU(3),e.qZA(),e.TgZ(4,"div",29),e.TgZ(5,"div",28),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e._uU(8),e.qZA(),e.TgZ(9,"div",30),e._uU(10),e.qZA(),e.TgZ(11,"div",31),e.YNc(12,j,2,1,"ng-container",13),e.YNc(13,E,2,1,"ng-container",13),e.qZA(),e.TgZ(14,"div"),e.TgZ(15,"button",32),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(4).toggleDetails(r.id)}),e._UZ(16,"mat-icon",33),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",19),e.YNc(18,V,2,4,"ng-container",13),e.qZA(),e.BQk()}if(2&n){const t=s.$implicit,o=s.index,a=e.oxw(4);e.xp6(3),e.hij(" ",o+1," "),e.xp6(3),e.Oqu(t.pincode),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.address," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon",(null==a.selectedCanopy?null:a.selectedCanopy.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==a.selectedCanopy?null:a.selectedCanopy.id)===t.id)}}function X(n,s){if(1&n&&(e.ynx(0),e.YNc(1,H,19,8,"ng-container",26),e.BQk()),2&n){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const W=function(n){return{"pointer-events-none":n}},K=function(){return[5,10,25,100]};function ee(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19),e.TgZ(2,"div",20),e.TgZ(3,"div",21),e._uU(4," S. No. "),e.qZA(),e.TgZ(5,"div",22),e._uU(6," Pincode "),e.qZA(),e.TgZ(7,"div",21),e._uU(8," Name "),e.qZA(),e.TgZ(9,"div",23),e._uU(10," Address "),e.qZA(),e.TgZ(11,"div",22),e._uU(12," Active "),e.qZA(),e.TgZ(13,"div",24),e._uU(14,"Details"),e.qZA(),e.qZA(),e.YNc(15,X,2,2,"ng-container",13),e.ALo(16,"async"),e.qZA(),e._UZ(17,"mat-paginator",25),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","serial_number"),e.xp6(2),e.Q6J("mat-sort-header","stock"),e.xp6(2),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","price"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,12,t.canopies$)),e.xp6(2),e.Q6J("ngClass",e.VKq(14,W,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(16,K))("showFirstLastButtons",!0)}}function te(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ee,18,17,"ng-container",18),e.BQk()),2&n){const t=s.ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o.noCanopy)}}function ne(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Canopy updated"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function oe(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",60),e.TgZ(2,"span",59),e._uU(3,"An error occurred, try again!"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function ie(n,s){if(1&n&&(e.TgZ(0,"div",57),e.YNc(1,ne,4,1,"ng-container",13),e.YNc(2,oe,4,1,"ng-container",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function se(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",37),e.TgZ(1,"div",38),e.TgZ(2,"form",39),e.TgZ(3,"div",40),e.TgZ(4,"div",41),e.TgZ(5,"div",42),e.TgZ(6,"mat-form-field",43),e.TgZ(7,"mat-label"),e._uU(8,"Name"),e.qZA(),e._UZ(9,"input",44),e.qZA(),e.TgZ(10,"div",45),e.TgZ(11,"mat-form-field",46),e._UZ(12,"textarea",47),e._UZ(13,"mat-icon",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",48),e.TgZ(15,"mat-form-field",49),e.TgZ(16,"mat-label"),e._uU(17,"PinCode"),e.qZA(),e._UZ(18,"input",44),e.qZA(),e.TgZ(19,"span",50),e._uU(20,"Canopy status"),e.qZA(),e.TgZ(21,"mat-slide-toggle",51),e._uU(22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",52),e.TgZ(24,"button",53),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteSelectedCanopy()}),e._uU(25," Delete "),e.qZA(),e.TgZ(26,"div",54),e.YNc(27,ie,3,2,"div",55),e.TgZ(28,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateSelectedCanopy()}),e._uU(29," Update "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedCanopyForm),e.xp6(7),e.Q6J("formControlName","name"),e.xp6(3),e.Q6J("placeholder","Address")("rows",3)("formControlName","address"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(5),e.Q6J("formControlName","pincode"),e.xp6(3),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.selectedCanopyForm.get("active").value?"Active":"Disabled"," "),e.xp6(2),e.Q6J("color","warn"),e.xp6(3),e.Q6J("ngIf",t.flashMessage),e.xp6(1),e.Q6J("color","primary")}}function ae(n,s){1&n&&(e.TgZ(0,"div",61),e._uU(1,"There are no canopies!"),e.qZA())}let re=(()=>{class n{constructor(t,o,a,r){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=a,this._canopiesService=r,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new c.NI,this.selectedCanopy=null,this._unsubscribeAll=new k.xQ}ngOnInit(){this.selectedCanopyForm=this._formBuilder.group({id:[""],name:["",[c.kI.required]],pincode:[""],address:[""],active:[!1]}),this._canopiesService.pagination$.pipe((0,v.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.canopies$=this._canopiesService.canopies$,this.searchInputControl.valueChanges.pipe((0,v.R)(this._unsubscribeAll),(0,q.b)(300),(0,p.w)(t=>(this.closeDetails(),this.isLoading=!0,this._canopiesService.getCanopies(0,10,"name","asc",t))),(0,g.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,v.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,R.T)(this._sort.sortChange,this._paginator.page).pipe((0,p.w)(()=>(this.closeDetails(),this.isLoading=!0,this._canopiesService.getCanopies(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,g.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleDetails(t){this.selectedCanopy&&this.selectedCanopy.id===t?this.closeDetails():this._canopiesService.getCanopyById(t).subscribe(o=>{this.selectedCanopy=o,this.selectedCanopyForm.patchValue(o),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedCanopy=null}createCanopy(){this._canopiesService.createCanopy().subscribe(t=>{this.selectedCanopy=t,this.selectedCanopyForm.patchValue(t),this._changeDetectorRef.markForCheck()})}updateSelectedCanopy(){const t=this.selectedCanopyForm.getRawValue();this._canopiesService.updateCanopy(t.id,t).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedCanopy(){this.selectedCanopyForm.getRawValue(),this._fuseConfirmationService.open({title:"Delete product",message:"Are you sure you want to remove this product? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(a=>{if("confirmed"===a){const r=this.selectedCanopyForm.getRawValue();this._canopiesService.deleteProduct(r.id,r).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),console.log(this.flashMessage),console.log("asdasd"),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,o){return o.id||t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(B.R),e.Y36(c.qu),e.Y36(U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["canopies-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(x.NW,5),e.Gf(u.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(o._paginator=a.first),e.iGM(a=e.CRH())&&(o._sort=a.first)}},decls:21,vars:10,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","flex-shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noCanopies",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"lg:flex","items-center",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,""],[1,"hidden","lg:flex","items-center"],[1,"hidden","sm:block","truncate"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-3/4","sm:pl-8"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex"],[1,"fuse-mat-textarea","flex-auto","w-2/3"],["matInput","",3,"placeholder","rows","formControlName"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],[1,"w-2/3"],[1,"font-semibold","mb-2"],[3,"formControlName","color"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],[1,"flex","items-center"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,$,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4,"Canopies"),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"mat-form-field",5),e._UZ(7,"mat-icon",6),e._UZ(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.createCanopy()}),e._UZ(10,"mat-icon",9),e.TgZ(11,"span",10),e._uU(12,"Add New"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"div",12),e.YNc(15,te,2,2,"ng-container",13),e.ALo(16,"async"),e.YNc(17,se,30,13,"ng-template",null,14,e.W1O),e.YNc(19,ae,2,0,"ng-template",null,15,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Search Canopy"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(16,8,o.canopies$)))},directives:[d.O5,m.KE,T.Hw,m.qo,b.Nt,c.Fj,c.JJ,c.oH,y.lW,A.pW,u.YE,u.nU,x.NW,d.mk,d.sg,d.tP,c._Y,c.JL,c.sg,m.hX,c.u,I.Rr],pipes:[d.Ov],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}\n"],encapsulation:2,data:{animation:D.L},changeDetection:0}),n})();const le=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-canopies"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[Z.lC],encapsulation:2,changeDetection:0}),n})(),children:[{path:"",component:re,resolve:{products:(()=>{class n{constructor(t){this._canopiesService=t}resolve(t,o){return this._canopiesService.getCanopies()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(U))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]}];let pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(le),y.ot,J.p9,m.lN,T.Ps,b.c,w.Tx,x.TU,A.Cv,L.si,u.JX,F.LD,I.rP,S.AV,N.m]]}),n})()}}]);