"use strict";(self.webpackChunk_dashboard=self.webpackChunk_dashboard||[]).push([[492],{1492:(pt,Z,r)=>{r.r(Z),r.d(Z,{DonorsModule:()=>gt});var D=r(3423),T=r(1095),Q=r(7539),m=r(8295),A=r(6627),C=r(9983),J=r(3935),x=r(9692),b=r(2178),q=r(2458),u=r(1494),w=r(7441),I=r(5396),L=r(1436),N=r(4466),a=r(3679),F=r(9765),S=r(6682),v=r(6782),R=r(4395),d=r(3190),g=r(8002),k=r(1452),t=r(7716),B=r(1400),_=r(6215),Y=r(205),M=r(5917),U=r(3342),f=r(5257),O=r(5435),j=r(1841);let y=(()=>{class n{constructor(o){this._httpClient=o,this._donors=new _.X(null),this._donor=new _.X(null),this._pagination=new _.X(null)}get donors$(){return this._donors.asObservable()}get donor$(){return this._donor.asObservable()}get pagination$(){return this._pagination.asObservable()}getDonors(o=0,e=10,s="name",c="asc",l=""){return this._httpClient.get("http://13.51.195.30:8080/admin/donors",{params:{page:""+o,size:""+e,sort:s,order:c,search:l}}).pipe((0,U.b)(h=>{this._pagination.next(h.pagination),this._donors.next(h.donors)}))}getDonorById(o){return this.donors$.pipe((0,f.q)(1),(0,g.U)(e=>{const s=e.find(c=>c.id===o)||null;return this._donor.next(s),s}),(0,d.w)(e=>e?(0,M.of)(e):(0,Y._)("Could not find donor with id of "+o+"!")))}createDonor(){return this.donors$.pipe((0,f.q)(1),(0,d.w)(o=>this._httpClient.post("api/apps/donor",{}).pipe((0,g.U)(e=>(this._donors.next([e,...o]),e)))))}updateDonor(o,e){return this.donors$.pipe((0,f.q)(1),(0,d.w)(s=>this._httpClient.patch("api/apps/donor",{id:o,donor:e}).pipe((0,g.U)(c=>{const l=s.findIndex(h=>h.id===o);return s[l]=c,this._donors.next(s),c}),(0,d.w)(c=>this.donor$.pipe((0,f.q)(1),(0,O.h)(l=>l&&l.id===o),(0,U.b)(()=>(this._donor.next(c),c)))))))}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(j.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=r(8583);function z(n,i){1&n&&(t.TgZ(0,"div",13),t._UZ(1,"mat-progress-bar",14),t.qZA()),2&n&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function $(n,i){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",30),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:check"))}function E(n,i){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",31),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:x"))}function G(n,i){1&n&&t.GkF(0)}const X=function(n){return{$implicit:n}};function H(n,i){if(1&n&&(t.ynx(0),t.YNc(1,G,1,0,"ng-container",32),t.BQk()),2&n){const o=t.oxw(5),e=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.VKq(2,X,o.selectedDonor))}}function V(n,i){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",23),t.TgZ(2,"div",24),t._uU(3),t.qZA(),t.TgZ(4,"div",25),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",26),t._uU(8),t.qZA(),t.TgZ(9,"div",26),t._uU(10),t.qZA(),t.TgZ(11,"div",26),t._uU(12),t.qZA(),t.TgZ(13,"div",26),t._uU(14),t.qZA(),t.TgZ(15,"div",27),t.YNc(16,$,2,1,"ng-container",10),t.YNc(17,E,2,1,"ng-container",10),t.qZA(),t.TgZ(18,"div"),t.TgZ(19,"button",28),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw(4).toggleDetails(c.id)}),t._UZ(20,"mat-icon",29),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",16),t.YNc(22,H,2,4,"ng-container",10),t.qZA(),t.BQk()}if(2&n){const o=i.$implicit,e=i.index,s=t.oxw(4);t.xp6(3),t.hij(" ",e+1," "),t.xp6(3),t.Oqu(o.name),t.xp6(2),t.hij(" ",o.contact," "),t.xp6(2),t.hij(" ",o.address," "),t.xp6(2),t.hij(" ",o.pincode," "),t.xp6(2),t.hij(" ",o.email," "),t.xp6(2),t.Q6J("ngIf",o.active),t.xp6(1),t.Q6J("ngIf",!o.active),t.xp6(3),t.Q6J("svgIcon",(null==s.selectedDonor?null:s.selectedDonor.id)===o.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.xp6(2),t.Q6J("ngIf",(null==s.selectedDonor?null:s.selectedDonor.id)===o.id)}}function W(n,i){if(1&n&&(t.ynx(0),t.YNc(1,V,23,10,"ng-container",22),t.BQk()),2&n){const o=i.ngIf,e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",o)("ngForTrackBy",e.trackByFn)}}const P=function(n){return{"pointer-events-none":n}},K=function(){return[5,10,25,100]};function tt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",16),t.TgZ(2,"div",17),t.TgZ(3,"div",18),t._uU(4," S. No. "),t.qZA(),t.TgZ(5,"div",18),t._uU(6," Donor Name "),t.qZA(),t.TgZ(7,"div",19),t._uU(8," Contact "),t.qZA(),t.TgZ(9,"div",19),t._uU(10," Address "),t.qZA(),t.TgZ(11,"div",19),t._uU(12," Pincode "),t.qZA(),t.TgZ(13,"div",19),t._uU(14," Email "),t.qZA(),t.TgZ(15,"div",19),t._uU(16," Active "),t.qZA(),t.TgZ(17,"div",20),t._uU(18,"Details"),t.qZA(),t.qZA(),t.YNc(19,W,2,2,"ng-container",10),t.ALo(20,"async"),t.qZA(),t._UZ(21,"mat-paginator",21),t.BQk()),2&n){const o=t.oxw(2);t.xp6(3),t.Q6J("mat-sort-header","serial_number"),t.xp6(2),t.Q6J("mat-sort-header","name"),t.xp6(2),t.Q6J("mat-sort-header","contact"),t.xp6(2),t.Q6J("mat-sort-header","address"),t.xp6(2),t.Q6J("mat-sort-header","pincode"),t.xp6(2),t.Q6J("mat-sort-header","email"),t.xp6(2),t.Q6J("mat-sort-header","active"),t.xp6(4),t.Q6J("ngIf",t.lcZ(20,14,o.donors$)),t.xp6(2),t.Q6J("ngClass",t.VKq(16,P,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",t.DdM(18,K))("showFirstLastButtons",!0)}}function ot(n,i){if(1&n&&(t.ynx(0),t.YNc(1,tt,22,19,"ng-container",15),t.BQk()),2&n){const o=i.ngIf;t.oxw();const e=t.MAs(16);t.xp6(1),t.Q6J("ngIf",o.length>0)("ngIfElse",e)}}function nt(n,i){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",54),t.TgZ(2,"span",55),t._uU(3,"Donor Data updated"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:check"))}function et(n,i){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",56),t.TgZ(2,"span",55),t._uU(3,"An error occurred, try again!"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"))}function rt(n,i){if(1&n&&(t.TgZ(0,"div",53),t.YNc(1,nt,4,1,"ng-container",10),t.YNc(2,et,4,1,"ng-container",10),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf","success"===o.flashMessage),t.xp6(1),t.Q6J("ngIf","error"===o.flashMessage)}}function it(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div",33),t.TgZ(1,"div",34),t.TgZ(2,"form",35),t.TgZ(3,"div",36),t.TgZ(4,"div",37),t.TgZ(5,"div",38),t.TgZ(6,"div",39),t.TgZ(7,"mat-form-field",40),t.TgZ(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",41),t.qZA(),t.TgZ(11,"mat-form-field",42),t.TgZ(12,"mat-label"),t._uU(13,"Contact"),t.qZA(),t._UZ(14,"input",41),t.qZA(),t.qZA(),t.TgZ(15,"div",39),t.TgZ(16,"mat-form-field",43),t._UZ(17,"textarea",44),t._UZ(18,"mat-icon",6),t.qZA(),t.TgZ(19,"mat-form-field",42),t.TgZ(20,"mat-label"),t._uU(21,"pincode"),t.qZA(),t._UZ(22,"input",41),t.qZA(),t.qZA(),t.TgZ(23,"div",39),t.TgZ(24,"mat-form-field",45),t.TgZ(25,"mat-label"),t._uU(26,"Email"),t.qZA(),t._UZ(27,"input",41),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",46),t.TgZ(29,"span",47),t._uU(30," Status"),t.qZA(),t.TgZ(31,"mat-slide-toggle",48),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",49),t.TgZ(34,"div",50),t.YNc(35,rt,3,2,"div",51),t.TgZ(36,"button",52),t.NdJ("click",function(){return t.CHM(o),t.oxw().updateSelectedDonor()}),t._uU(37," Update "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=t.oxw();t.xp6(2),t.Q6J("formGroup",o.selectedDonorForm),t.xp6(8),t.Q6J("formControlName","name"),t.xp6(4),t.Q6J("formControlName","contact"),t.xp6(3),t.Q6J("placeholder","Address")("rows",3)("formControlName","address"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:menu-alt-2"),t.xp6(4),t.Q6J("formControlName","pincode"),t.xp6(5),t.Q6J("formControlName","email"),t.xp6(4),t.Q6J("formControlName","active")("color","primary"),t.xp6(1),t.hij(" ",!0===o.selectedDonorForm.get("active").value?"Active":"Disabled"," "),t.xp6(3),t.Q6J("ngIf",o.flashMessage),t.xp6(1),t.Q6J("color","primary")}}function st(n,i){1&n&&(t.TgZ(0,"div",57),t._uU(1,"There are no Donors!"),t.qZA())}let at=(()=>{class n{constructor(o,e,s,c){this._changeDetectorRef=o,this._fuseConfirmationService=e,this._formBuilder=s,this._donorsService=c,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new a.NI,this.selectedDonor=null,this._unsubscribeAll=new F.xQ}ngOnInit(){this.selectedDonorForm=this._formBuilder.group({id:[""],name:["",[a.kI.required]],address:["",[a.kI.required]],pincode:["",[a.kI.required]],contact:["",[a.kI.required]],email:["",[a.kI.required]],active:[Boolean,[a.kI.required]]}),this._donorsService.pagination$.pipe((0,v.R)(this._unsubscribeAll)).subscribe(o=>{this.pagination=o,this._changeDetectorRef.markForCheck()}),this.donors$=this._donorsService.donors$,this.searchInputControl.valueChanges.pipe((0,v.R)(this._unsubscribeAll),(0,R.b)(300),(0,d.w)(o=>(this.closeDetails(),this.isLoading=!0,this._donorsService.getDonors(0,10,"name","asc",o))),(0,g.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,v.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,S.T)(this._sort.sortChange,this._paginator.page).pipe((0,d.w)(()=>(this.closeDetails(),this.isLoading=!0,this._donorsService.getDonors(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,g.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleDetails(o){this.selectedDonor&&this.selectedDonor.id===o?this.closeDetails():this._donorsService.getDonorById(o).subscribe(e=>{this.selectedDonor=e,this.selectedDonorForm.patchValue(e),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedDonor=null}updateSelectedDonor(){const o=this.selectedDonorForm.getRawValue();this._donorsService.updateDonor(o.id,o).subscribe(()=>{this.showFlashMessage("success")})}showFlashMessage(o){this.flashMessage=o,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(o,e){return e.id||o}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(t.sBO),t.Y36(B.R),t.Y36(a.qu),t.Y36(y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["donors-list"]],viewQuery:function(o,e){if(1&o&&(t.Gf(x.NW,5),t.Gf(u.YE,5)),2&o){let s;t.iGM(s=t.CRH())&&(e._paginator=s.first),t.iGM(s=t.CRH())&&(e._sort=s.first)}},decls:17,vars:8,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","flex-shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noDonor",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"donors-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"lg:flex","items-center",3,"mat-sort-header"],[1,"hidden","lg:flex","items-center",3,"mat-sort-header"],[1,"hidden","sm:flex","items-center"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"donors-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,""],[1,"lg:flex","items-center"],[1,"hidden","lg:block","truncate"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-3/4","sm:pl-8"],[1,"flex"],[1,"w-2/3","pr-2"],["matInput","",3,"formControlName"],[1,"w-1/3","pl-2"],[1,"fuse-mat-textarea","flex-auto","w-2/3","pr-2"],["matInput","",3,"placeholder","rows","formControlName"],[1,"w-2/3","pl-2"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],[1,"flex","items-center"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,z,2,1,"div",2),t.TgZ(3,"div",3),t._uU(4,"Donors"),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"mat-form-field",5),t._UZ(7,"mat-icon",6),t._UZ(8,"input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.YNc(11,ot,2,2,"ng-container",10),t.ALo(12,"async"),t.YNc(13,it,38,14,"ng-template",null,11,t.W1O),t.YNc(15,st,2,0,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Q6J("ngIf",e.isLoading),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Search Donor"),t.xp6(3),t.Q6J("ngIf",t.lcZ(12,6,e.donors$)))},directives:[p.O5,m.KE,A.Hw,m.qo,C.Nt,a.Fj,a.JJ,a.oH,b.pW,u.YE,u.nU,x.NW,p.mk,p.sg,T.lW,p.tP,a._Y,a.JL,a.sg,m.hX,a.u,I.Rr],pipes:[p.Ov],styles:[".donors-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.donors-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.donors-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.donors-grid{grid-template-columns:40px 150px 100px 200px 150px 100px 30px 30px}}\n"],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})();const dt=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-donors"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},directives:[D.lC],encapsulation:2,changeDetection:0}),n})(),children:[{path:"",component:at,resolve:{donors:(()=>{class n{constructor(o){this._donorsService=o}resolve(o,e){return this._donorsService.getDonors()}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(y))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]}];let gt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[D.Bz.forChild(dt),T.ot,Q.p9,m.lN,A.Ps,C.c,J.Tx,x.TU,b.Cv,q.si,u.JX,w.LD,I.rP,L.AV,N.m]]}),n})()}}]);